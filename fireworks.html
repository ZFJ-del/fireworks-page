<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸Šç­å¿«ä¹çƒŸèŠ±</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #000;
            overflow: hidden;
            font-family: 'Microsoft YaHei', sans-serif;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
        }

        canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .title {
            position: relative;
            z-index: 10;
            text-align: center;
            margin-bottom: 20px;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 0 0 10px #ff0080;
        }

        .subtitle {
            font-size: 1.2em;
            opacity: 0.8;
        }

        .share-btn {
            position: relative;
            z-index: 10;
            background: linear-gradient(45deg, #ff0080, #ff8c00);
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 1.1em;
            border-radius: 25px;
            cursor: pointer;
            margin-top: 20px;
            transition: transform 0.3s;
        }

        .share-btn:hover {
            transform: scale(1.05);
        }

        /* æ–‡å­—ç²’å­æ ·å¼ */
        .text-particle {
            position: absolute;
            font-size: 24px;
            font-weight: bold;
            pointer-events: none;
            z-index: 2;
            text-shadow: 0 0 10px currentColor;
        }
    </style>
</head>
<body>
<div class="title">
    <h1>ğŸ† ä¸Šç­å¿«ä¹çƒŸèŠ± ğŸ†</h1>
    <p class="subtitle">ç‚¹å‡»å±å¹•å‘å°„å¸¦æœ‰ç¥ç¦æ–‡å­—çš„çƒŸèŠ±</p>
</div>

<button class="share-btn" onclick="sharePage()">åˆ†äº«ç»™æœ‹å‹</button>

<canvas id="fireworks"></canvas>

<script>
    // è·å–Canvasä¸Šä¸‹æ–‡
    const canvas = document.getElementById('fireworks');
    const ctx = canvas.getContext('2d');

    // è®¾ç½®Canvaså¤§å°ä¸ºçª—å£å¤§å°
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    // çƒŸèŠ±ç²’å­æ•°ç»„
    const fireworks = [];
    const particles = [];
    const textParticles = [];

    // é¢œè‰²æ•°ç»„
    const colors = ['#ff0080', '#ff8c00', '#00ff88', '#0088ff', '#ff00ff', '#ffff00', '#00ffff'];

    // ç¥ç¦æ–‡å­—æ•°ç»„ - è½®æ¢æ˜¾ç¤º
    const blessingTexts = ['ä¸Š', 'ç­', 'å¿«', 'ä¹'];
    let textIndex = 0;

    // æ–‡å­—ç²’å­ç±»
    class TextParticle {
        constructor(x, y, vx, vy, color, size, text) {
            this.x = x;
            this.y = y;
            this.vx = vx;
            this.vy = vy;
            this.color = color;
            this.size = size;
            this.text = text;
            this.alpha = 1;
            this.decay = 0.97;
            this.gravity = 0.1;
            this.rotation = Math.random() * Math.PI * 2;
            this.rotationSpeed = (Math.random() - 0.5) * 0.1;
        }

        update() {
            this.x += this.vx;
            this.y += this.vy;
            this.vy += this.gravity;
            this.vx *= this.decay;
            this.vy *= this.decay;
            this.alpha -= 0.01;
            this.size *= 0.995;
            this.rotation += this.rotationSpeed;

            return this.alpha > 0 && this.size > 5;
        }

        draw() {
            ctx.save();
            ctx.globalAlpha = this.alpha;
            ctx.fillStyle = this.color;
            ctx.font = `bold ${this.size}px Microsoft YaHei`;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.translate(this.x, this.y);
            ctx.rotate(this.rotation);
            ctx.fillText(this.text, 0, 0);
            ctx.restore();
        }
    }

    // çƒŸèŠ±ç±»
    class Firework {
        constructor(x, y) {
            this.x = x;
            this.y = y;
            this.targetY = Math.random() * canvas.height * 0.3;
            this.speed = 5;
            this.color = colors[Math.floor(Math.random() * colors.length)];
            this.trail = [];
            this.exploded = false;
            this.text = blessingTexts[textIndex]; // è·å–å½“å‰æ–‡å­—

            // æ›´æ–°æ–‡å­—ç´¢å¼•ï¼Œè½®æ¢æ˜¾ç¤º
            textIndex = (textIndex + 1) % blessingTexts.length;
        }

        update() {
            if (!this.exploded) {
                // ä¸Šå‡é˜¶æ®µ
                this.y -= this.speed;
                this.trail.push({x: this.x, y: this.y});

                if (this.trail.length > 5) this.trail.shift();

                // åˆ°è¾¾ç›®æ ‡é«˜åº¦æ—¶çˆ†ç‚¸
                if (this.y <= this.targetY) {
                    this.explode();
                }
            }
        }

        explode() {
            this.exploded = true;
            const particleCount = 60 + Math.random() * 30;
            const textParticleCount = 8; // æ–‡å­—ç²’å­æ•°é‡

            // åˆ›å»ºæ™®é€šç²’å­
            for (let i = 0; i < particleCount; i++) {
                const angle = Math.random() * Math.PI * 2;
                const speed = 2 + Math.random() * 4;
                const size = 1 + Math.random() * 3;
                const decay = 0.94 + Math.random() * 0.03;

                particles.push(new Particle(
                    this.x, this.y,
                    Math.cos(angle) * speed,
                    Math.sin(angle) * speed,
                    this.color,
                    size,
                    decay
                ));
            }

            // åˆ›å»ºæ–‡å­—ç²’å­ - æ˜¾ç¤º"ä¸Šç­å¿«ä¹"
            for (let i = 0; i < textParticleCount; i++) {
                const angle = (i / textParticleCount) * Math.PI * 2;
                const speed = 1.5 + Math.random() * 2;
                const size = 20 + Math.random() * 15;

                textParticles.push(new TextParticle(
                    this.x, this.y,
                    Math.cos(angle) * speed,
                    Math.sin(angle) * speed,
                    this.color,
                    size,
                    this.text
                ));
            }

            // é¢å¤–åˆ›å»ºä¸€äº›éšæœºæ–¹å‘çš„æ–‡å­—ç²’å­
            for (let i = 0; i < 4; i++) {
                const angle = Math.random() * Math.PI * 2;
                const speed = 1 + Math.random() * 3;
                const size = 25 + Math.random() * 20;

                textParticles.push(new TextParticle(
                    this.x, this.y,
                    Math.cos(angle) * speed,
                    Math.sin(angle) * speed,
                    colors[Math.floor(Math.random() * colors.length)],
                    size,
                    blessingTexts[Math.floor(Math.random() * blessingTexts.length)]
                ));
            }
        }

        draw() {
            if (!this.exploded) {
                // ç»˜åˆ¶çƒŸèŠ±å°¾è¿¹
                ctx.strokeStyle = this.color;
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(this.trail[0].x, this.trail[0].y);
                for (let i = 1; i < this.trail.length; i++) {
                    ctx.lineTo(this.trail[i].x, this.trail[i].y);
                }
                ctx.stroke();

                // ç»˜åˆ¶çƒŸèŠ±å¤´
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, 3, 0, Math.PI * 2);
                ctx.fill();
            }
        }
    }

    // æ™®é€šç²’å­ç±»ï¼ˆä¿æŒåŸæœ‰æ•ˆæœï¼‰
    class Particle {
        constructor(x, y, vx, vy, color, size, decay) {
            this.x = x;
            this.y = y;
            this.vx = vx;
            this.vy = vy;
            this.color = color;
            this.size = size;
            this.decay = decay;
            this.alpha = 1;
            this.gravity = 0.1;
        }

        update() {
            this.x += this.vx;
            this.y += this.vy;
            this.vy += this.gravity;
            this.vx *= this.decay;
            this.vy *= this.decay;
            this.alpha -= 0.01;
            this.size *= 0.99;

            return this.alpha > 0 && this.size > 0.1;
        }

        draw() {
            ctx.save();
            ctx.globalAlpha = this.alpha;
            ctx.fillStyle = this.color;
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
            ctx.fill();
            ctx.restore();
        }
    }

    // åŠ¨ç”»å¾ªç¯
    function animate() {
        // åŠé€æ˜é»‘è‰²è¦†ç›–ï¼Œåˆ¶é€ æ‹–å°¾æ•ˆæœ
        ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // éšæœºç”Ÿæˆæ–°çƒŸèŠ±ï¼ˆè‡ªåŠ¨æ’­æ”¾ï¼‰
        if (Math.random() < 0.03) {
            fireworks.push(new Firework(
                Math.random() * canvas.width,
                canvas.height
            ));
        }

        // æ›´æ–°å’Œç»˜åˆ¶çƒŸèŠ±
        for (let i = fireworks.length - 1; i >= 0; i--) {
            fireworks[i].update();
            fireworks[i].draw();

            if (fireworks[i].exploded) {
                fireworks.splice(i, 1);
            }
        }

        // æ›´æ–°å’Œç»˜åˆ¶æ™®é€šç²’å­
        for (let i = particles.length - 1; i >= 0; i--) {
            if (!particles[i].update()) {
                particles.splice(i, 1);
            } else {
                particles[i].draw();
            }
        }

        // æ›´æ–°å’Œç»˜åˆ¶æ–‡å­—ç²’å­
        for (let i = textParticles.length - 1; i >= 0; i--) {
            if (!textParticles[i].update()) {
                textParticles.splice(i, 1);
            } else {
                textParticles[i].draw();
            }
        }

        requestAnimationFrame(animate);
    }

    // ç‚¹å‡»å‘å°„çƒŸèŠ±ï¼ˆå¢å¼ºç‰ˆï¼‰
    canvas.addEventListener('click', function(e) {
        // å‘å°„3ä¸ªçƒŸèŠ±ï¼Œæ¯ä¸ªæ˜¾ç¤ºä¸åŒçš„æ–‡å­—
        for (let i = 0; i < 3; i++) {
            setTimeout(() => {
                fireworks.push(new Firework(
                    e.clientX + (Math.random() - 0.5) * 100,
                    canvas.height
                ));
            }, i * 200);
        }
    });

    // è§¦æ‘¸æ”¯æŒï¼ˆç§»åŠ¨ç«¯ï¼‰
    canvas.addEventListener('touchstart', function(e) {
        e.preventDefault();
        const touch = e.touches[0];

        for (let i = 0; i < 3; i++) {
            setTimeout(() => {
                fireworks.push(new Firework(
                    touch.clientX + (Math.random() - 0.5) * 100,
                    canvas.height
                ));
            }, i * 200);
        }
    });

    // é”®ç›˜æ”¯æŒï¼ˆæŒ‰ç©ºæ ¼é”®å‘å°„ï¼‰
    document.addEventListener('keydown', function(e) {
        if (e.code === 'Space') {
            for (let i = 0; i < 3; i++) {
                setTimeout(() => {
                    fireworks.push(new Firework(
                        Math.random() * canvas.width,
                        canvas.height
                    ));
                }, i * 200);
            }
        }
    });

    // åˆ†äº«åŠŸèƒ½
    function sharePage() {
        if (navigator.share) {
            navigator.share({
                title: 'ä¸Šç­å¿«ä¹çƒŸèŠ±ç§€',
                text: 'ç‚¹å‡»è§‚çœ‹å¸¦æœ‰"ä¸Šç­å¿«ä¹"ç¥ç¦çš„ç‚«é…·çƒŸèŠ±æ•ˆæœï¼',
                url: window.location.href
            });
        } else {
            // å¤åˆ¶é“¾æ¥
            navigator.clipboard.writeText(window.location.href);
            alert('é“¾æ¥å·²å¤åˆ¶ï¼Œå¯ä»¥åˆ†äº«ç»™æœ‹å‹äº†ï¼\nç¥ç¦è¯­ï¼šä¸Šç­å¿«ä¹ï¼');
        }
    }

    // å“åº”çª—å£å¤§å°å˜åŒ–
    window.addEventListener('resize', function() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    });

    // å¼€å§‹åŠ¨ç”»
    animate();

    // æ·»åŠ ä¸€äº›åˆå§‹çƒŸèŠ±å±•ç¤º
    for (let i = 0; i < 8; i++) {
        setTimeout(() => {
            fireworks.push(new Firework(
                Math.random() * canvas.width,
                canvas.height
            ));
        }, i * 800);
    }

    // æ·»åŠ è¯´æ˜æ–‡å­—
    console.log('ğŸ† ä¸Šç­å¿«ä¹çƒŸèŠ±å·²åŠ è½½ï¼');
    console.log('ğŸ’¡ æ“ä½œæç¤ºï¼š');
    console.log('   - ç‚¹å‡»å±å¹•å‘å°„çƒŸèŠ±');
    console.log('   - æŒ‰ç©ºæ ¼é”®éšæœºå‘å°„');
    console.log('   - è‡ªåŠ¨æ’­æ”¾ä¸­...');
</script>
</body>
</html>